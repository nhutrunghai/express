extend ../../layout/dashboard.pug 
include ../../mixins/toast.pug

block main
  link(rel="preconnect" href="https://fonts.googleapis.com")
  link(rel="preconnect" href="https://fonts.gstatic.com" crossorigin)
  link(rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300..800&display=swap")

  link(rel="stylesheet", href="/admin/css/users.create.css")

  style.
    html, body {
      font-family: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      letter-spacing: 0;
    }
    h1, h2, h3, h4, h5, h6 {
      font-weight: 700;
      letter-spacing: .005em;
    }
    .btn { font-weight: 600; border-radius: 10px; }
    .form-control, .form-select { border-radius: 10px; font-weight: 500; }
    .input-group-text { border-radius: 10px; font-weight: 600; }
    label.form-label { font-weight: 600; }
    small, .form-hint { font-weight: 500; }
    .card-soft { border: 0; border-radius: 16px; box-shadow: 0 6px 18px rgba(0,0,0,.06); }
    .section-title { font-size: .9rem; text-transform: uppercase; letter-spacing:.06em; color:#6c757d; margin-bottom:.75rem; }
    .form-hint { font-size:.825rem; color:#6c757d; }
    .sticky-actions { position: sticky; bottom: 0; background:#fff; border-top:1px solid #eee; padding: .75rem; z-index: 2; display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; }

  +Toast(messages)

  .container.mt-5
    h2.mb-4 Sửa Người Dùng

    .card.card-soft
      form(action=`/${pathAdmin}/users/edit/${account._id}?&_method=PATCH` method="POST" enctype="multipart/form-data")
        .card-body
          .row.g-4
            .col-12.col-lg-6
              .section-title Thông tin người dùng
              .mb-3
                label.form-label(for='fullName') Họ và tên
                input#fullName.form-control(type='text' placeholder='Nhập họ và tên' name='fullName' required value=account.fullName)
              .mb-3
                label.form-label(for='email') Email
                input#email.form-control(type='email' placeholder='Nhập email' name='email' required value=account.email)
              .mb-3
                label.form-label(for='password') Mật khẩu Mới
                input#password.form-control(type='password' placeholder='Nhập mật khẩu' name='password' )
              .mb-3
                label.form-label(for='phone') Số điện thoại
                input#phone.form-control(type='text' placeholder='Nhập số điện thoại' name='phone' value=account.phone)
              .mb-3
                label.form-label(for='avatar') Avatar
                input#avatar.form-control-file(type='file' name='avatar' accept='image/*')
                
                .mt-2.preview-wrap
                  img.thumb-preview(alt='Preview (chưa chọn ảnh)' src=account.avatar)
                  input(hidden type="text", name="current" value=account.avatar)
                  button(type='button' class='btn btn-outline-danger btn-sm' remove-image) Xóa ảnh
                .form-hint.mt-1 JPG/PNG, khuyến nghị tỉ lệ 1:1.

            .col-12.col-lg-6
              .section-title Trạng thái và Vai trò
              .mb-3
                label.form-label(for='role_id') Vai trò
                select#role_id.form-select(name='role_id')  
                  option(value='') -- Chọn vai trò --
                  option(value='' selected=(account.role_id ? false : true ) ) Người dùng
                  each role of roles
                    option(value=role._id selected=(account.role_id ? (account.role_id.equals(role._id)) : false)) #{role.title}
              .mb-3
                label.form-label(for='status') Trạng thái
                .input-group
                  input#active.btn-check(type='radio' name='status' checked=(account.status ==="active" ? true : false) autocomplete='off' value='active')
                  label.btn.btn-outline-success.me-2(for='active') Hoạt động
                  input#inactive.btn-check(type='radio' name='status' checked=(account.status ==="active" ? false : true) autocomplete='off' value='inactive' )
                  label.btn.btn-outline-secondary(for='inactive' ) Dừng hoạt động

        .sticky-actions
          a.btn.btn-outline-secondary(href=`/${pathAdmin}/users`) Quay lại
          button.btn.btn-primary(type='submit')
            i.fas.fa-save.me-1
            | Cập Nhật
          
block script  
  script(src="/admin/js/products.priview.js")
