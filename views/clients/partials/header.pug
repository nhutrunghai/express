include ../mixins/treeCategory.mixin.pug

header
  // Navbar liền khối 2 tầng
  nav.navbar.navbar-expand-lg.bg-white.shadow-sm.flex-column
    .container.d-flex.align-items-center.py-2
      // logo
      a.navbar-brand.text-primary.fw-bold(href="/")
        i.bi.bi-shop.me-1
        | ShopX

      // search dài
      form.d-flex.flex-grow-1.mx-4(role="search", action="/search", method="GET")
        input.form-control.w-100(type="search", name="q", placeholder="Tìm sản phẩm...", aria-label="Search" value=(keySearch ? keySearch : '' ))
        button.btn.btn-outline-primary.ms-2(type="submit")
          i.bi.bi-search

      // minicart
      a.nav-link.position-relative.text-dark.ms-3(href="/cart")
        i.bi.bi-cart3.fs-5
        span.position-absolute.top-0.start-100.translate-middle.badge.rounded-pill.bg-danger #{cart ? (cart.totalProduct || null) : null}

      // login / register
      a.nav-link.text-dark.ms-3(href="/login")
        i.bi.bi-box-arrow-in-right.me-1
        | Đăng nhập
      a.nav-link.text-dark.ms-3(href="/register")
        i.bi.bi-person-plus.me-1
        | Đăng ký

    // Tầng menu danh mục (ngay bên dưới, vẫn là con của navbar)
    .container
      ul.nav.justify-content-start.w-100.border-top.pt-2
        li.nav-item
          a.nav-link.text-dark.fw-semibold(href="/")
            i.bi.bi-house.me-1
            | Trang chủ
        li.nav-item
          a.nav-link.text-dark.fw-semibold(href="/product")
            i.bi.bi-box-seam.me-1
            | Sản phẩm
          +treeCategory(category,true)
        li.nav-item
          a.nav-link.text-dark.fw-semibold(href="/deals")
            i.bi.bi-tags.me-1
            | Khuyến mãi
        li.nav-item
          a.nav-link.text-dark.fw-semibold(href="/new")
            i.bi.bi-stars.me-1
            | Hàng mới
        li.nav-item
          a.nav-link.text-dark.fw-semibold(href="/blog")
            i.bi.bi-journal-text.me-1
            | Blog
        li.nav-item
          a.nav-link.text-dark.fw-semibold(href="/contact")
            i.bi.bi-telephone.me-1
            | Liên hệ

  // CSS chỉnh thêm
  style.
    @media (min-width: 992px) {
      .navbar .navbar-nav.me-auto { margin-left: 1.25rem; }
    }

    .navbar .nav-item { position: relative; }
    .navbar .nav-item:hover > .dropdown-menu { display: block; }
    .navbar .nav-item > .dropdown-menu:hover { display: block; }
    .navbar .dropdown-menu { margin-top: 0; box-shadow:0 .5rem 1rem rgba(0,0,0,.08); }
    .navbar .nav-item:hover::after {
      content: "";
      position: absolute;
      left: 0; right: 0;
      top: 100%;
      height: 10px;
      background: transparent;
    }

    .navbar .dropdown-submenu { position: relative; }
    .navbar .dropdown-submenu > .dropdown-menu {
      top: 0; left: 100%;
      margin-left: .15rem;
      display: none;
      min-width: 12rem;
    }
    .navbar .dropdown-submenu:hover > .dropdown-menu { display: block; }
    .navbar .dropdown-submenu:hover::after {
      content:""; position:absolute; top:0; left:100%;
      width: 10px; height: 100%; background: transparent;
    }

    .navbar .nav-link i { font-size: 1rem; }

