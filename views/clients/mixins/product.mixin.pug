//- mixin: danh sách sản phẩm (style gói trong mixin)
//- Products: [{ title, thumbnail, price, newPrice, featured, stock, sold, href }]
mixin mixins-product(Products)
  .product-list
    // ===== SCOPED STYLE =====
    style.
      .product-list .object-fit-cover{object-fit:cover;}
      .product-list .line-clamp-2{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;}
      .product-list .product-card{border:1px solid rgba(0,0,0,.06);border-radius:.75rem;box-shadow:0 .25rem .75rem rgba(0,0,0,.06);transition:transform .18s ease, box-shadow .18s ease;}
      .product-list .product-card:hover{transform:translateY(-3px);box-shadow:0 .9rem 1.6rem rgba(0,0,0,.12);}
      .product-list .thumb{position:relative;}
      /* Ribbon NỔI BẬT dán trên ảnh */
      .product-list .ribbon{
        position:absolute; top:.65rem; left:-.4rem; z-index:2;
        background:linear-gradient(90deg,#f59e0b,#d97706); color:#fff;
        padding:.25rem .6rem; font-weight:700; font-size:.8rem; letter-spacing:.2px;
        border-radius:.35rem .35rem .35rem 0; box-shadow:0 .5rem 1rem rgba(0,0,0,.15);
        text-transform:uppercase;
      }
      .product-list .ribbon::before{
        content:""; position:absolute; left:0; top:100%;
        border-top:6px solid #a16207; border-left:6px solid transparent;
      }
      /* Chips Kho/Đã bán/% theo palette bootstrap */
      .product-list .chips{display:flex;flex-wrap:wrap;gap:.4rem}
      .product-list .chip{display:inline-flex;align-items:center;gap:.35rem;padding:.25rem .5rem;border-radius:.35rem;font-size:.82rem;color:#fff;line-height:1;font-weight:600}
      .product-list .chip-primary{background:#0d6efd}
      .product-list .chip-success{background:#198754}
      .product-list .chip-danger{background:#dc3545}
      /* lưới thoáng */
      .product-list .grid{row-gap:1rem}
      @media (max-width:575.98px){ .product-list .btn{width:100%} }

    // ===== LIST =====
    if !Products || (Array.isArray(Products) && Products.length === 0) || (typeof Products === 'object' && Object.keys(Products).length === 0)
      .text-center.text-muted.py-5 Chưa có sản phẩm.
    else
      .row.grid
        each value, i in Products
          - var hasDiscount = value && value.price && value.newPrice && Number(value.price) > Number(value.newPrice);
          - var percent = hasDiscount ? Math.round((1 - Number(value.newPrice)/Number(value.price)) * 100) : null;
          - var stockVal = (value && value.stock) != null ? value.stock : '77.723'; // giả định
          - var soldVal  = (value && value.sold)  != null ? value.sold  : '3.256';  // giả định
          .col-6.col-md-4.col-lg-3
            .card.product-card.h-100.position-relative
              a(href=(value.slug ? `/product/detail/${value.slug}` : '#!'), class="text-decoration-none")
                .thumb
                  // Ribbon NỔI BẬT (giả định theo value.featured)
                  if value && value.featured
                    span.ribbon Nổi bật
                  .ratio.ratio-1x1.bg-light.rounded-top
                    if value && value.thumbnail
                      img.w-100.h-100.object-fit-cover.rounded-top(src=value.thumbnail, alt=value.title || 'Sản phẩm')
                    else
                      .d-flex.align-items-center.justify-content-center.h-100.text-muted
                        i.bi.bi-image.me-2
                        | No Image

              .card-body.p-3
                h6.card-title.mb-2.text-dark.fw-semibold.line-clamp-2= (value && value.title) || 'Tên sản phẩm'
                .chips.mb-2
                  span.chip.chip-primary
                    i.bi.bi-box-seam.me-1
                    | Kho:
                    b.ms-1= stockVal
                  span.chip.chip-success
                    i.bi.bi-check2-circle.me-1
                    | Đã bán:
                    b.ms-1= soldVal
                  if hasDiscount && percent>0
                    span.chip.chip-danger -#{percent}%

                .d-flex.align-items-baseline.gap-2
                  if hasDiscount
                    span.h6.mb-0.text-danger.fw-bold #{value.newPrice}₫
                    small.text-muted.text-decoration-line-through #{value.price}₫
                  else
                    span.h6.mb-0.text-dark.fw-bold #{(value && (value.newPrice || value.price)) ? (value.newPrice || value.price) + '₫' : 'Liên hệ'}

              .card-footer.bg-white.border-0.pt-2.pb-3.px-3
                .d-flex.gap-2
                  a.btn.btn-sm.btn-outline-primary.flex-fill(href=(value.slug ? `/product/detail/${value.slug}` : '#!'))
                    i.bi.bi-eye.me-1
                    | Xem chi tiết
                  button.btn.btn-sm.btn-primary.flex-fill(type="button")
                    i.bi.bi-cart-plus.me-1
                    | Thêm giỏ
